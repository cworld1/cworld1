{"title":"NodeJS 的一些相关技术","date":"2023-07-19T13:24:36.000Z","date_formatted":{"ll":"2023年7月19日","L":"2023/07/19","MM-DD":"07-19"},"link":"post/nodejs","comments":true,"tags":["NodeJS","fnm","nvm"],"categories":["Tutorials"],"updated":"2023-12-15T11:02:17.722Z","content":"<p>Node.js® is an open-source, cross-platform JavaScript runtime environment.</p>\n<span id=\"more\"></span>\n<h2 id=\"nvm\">nvm<a title=\"#nvm\" href=\"#nvm\"></a></h2>\n<p>无论选择在 Windows 还是在 WSL 上安装，安装 Node.js 时还要作出其他选择。 建议使用版本管理器，因为版本变更速度非常快。 你可能需要根据所使用的不同项目的需求在多个版本的 Node.js 之间进行切换。 Node 版本管理器（通常称为 nvm）是安装多个版本的 Node.js 的最常见方法。 我们将演练安装 nvm 的步骤，然后使用它来安装 Node.js。</p>\n<h3 id=\"安装-nvm\">安装 nvm<a title=\"#安装-nvm\" href=\"#安装-nvm\"></a></h3>\n<p>要安装或更新 nvm，应运行安装脚本。为此，您可以手动下载并运行该脚本，或者使用以下 cURL 或 Wget 命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash</span><br></pre></td></tr></table></figure>\n<p>运行上述任一命令都会下载并运行脚本。该脚本将 nvm 仓库克隆到 <code>~/.nvm</code>，并尝试将以下代码片段中的源代码追加到正确的配置文件（<code>~/.bash_profile</code>、<code>~/.zshc</code>、<code>~/.profile</code> 或 <code>~/.bashrc</code>）中。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> NVM_DIR=<span class=\"string\">&quot;<span class=\"variable\">$HOME</span>/.nvm&quot;</span></span><br><span class=\"line\">[ -s <span class=\"string\">&quot;<span class=\"variable\">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; \\. <span class=\"string\">&quot;<span class=\"variable\">$NVM_DIR</span>/nvm.sh&quot;</span>  <span class=\"comment\"># This loads nvm</span></span><br><span class=\"line\">[ -s <span class=\"string\">&quot;<span class=\"variable\">$NVM_DIR</span>/bash_completion&quot;</span> ] &amp;&amp; \\. <span class=\"string\">&quot;<span class=\"variable\">$NVM_DIR</span>/bash_completion&quot;</span>  <span class=\"comment\"># This loads nvm bash_completion</span></span><br></pre></td></tr></table></figure>\n<p><img src=\"https://cdn.cbd.int/cworld-blog@latest/nodejs/Pasted_image_20230129235827.png\" alt=\"Alt text\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"验证-nvm\">验证 nvm<a title=\"#验证-nvm\" href=\"#验证-nvm\"></a></h3>\n<p>使用命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">command</span> -v nvm</span><br></pre></td></tr></table></figure>\n<p>或者，<code>nvm -v</code> 也许是个不错的检查方式。</p>\n<p><img src=\"https://cdn.cbd.int/cworld-blog@latest/nodejs/Pasted_image_20230130000053.png\" alt=\"Alt text\" loading=\"lazy\" class=\"φbp\"></p>\n<blockquote>\n<p>在 Linux 上，运行安装脚本后，如果您在键入 <code>command -v nvm</code> 后收到 <code>nvm: command not found</code> 或看不到来自终端的反馈，只需关闭当前终端，并重新打开新终端，然后再次尝试验证即可。 或者，您可以在命令行上为不同的 shell 运行以下命令：</p>\n<ul>\n<li><em>bash</em>: <code>source ~/.bashrc</code></li>\n<li><em>zsh</em>: <code>source ~/.zshrc</code></li>\n<li><em>ksh</em>: <code>. ~/.profile</code></li>\n</ul>\n<p>嗯…希望你能看懂我在说什么。</p>\n</blockquote>\n<h3 id=\"nvm-用法\">nvm 用法<a title=\"#nvm-用法\" href=\"#nvm-用法\"></a></h3>\n<p>想要下载、编译和安装最新版本的 node，你可以直接执行：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm install node <span class=\"comment\"># &quot;node&quot; is an alias for the latest version</span></span><br><span class=\"line\">nvm install --lts <span class=\"comment\"># 使用 LTS 版本更适合生产应用程序，避免问题</span></span><br></pre></td></tr></table></figure>\n<p>安装一个特定版本的 node：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm install 14.7.0 <span class=\"comment\"># or 16.3.0, 12.22.1, etc</span></span><br></pre></td></tr></table></figure>\n<p>你安装的第一个版本会被设置为默认版本。所有新的终端将使用默认版本的 node 作为起始。你也可以使用 <code>nvm default v18.13.0</code> 切换。卸载对应版本请使用：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm uninstall --version 18.13.0</span><br></pre></td></tr></table></figure>\n<p>使用命令 <code>ls-remote</code> 会列出所有 nvm 能够提供的 node 版本。列表会比较长，你可以使用 <code>vxx</code> 关键字简单过滤：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm ls-remote v18</span><br></pre></td></tr></table></figure>\n<p>然后在任何新的 shell 里使用安装的版本：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm use node</span><br><span class=\"line\">nvm use v18.13.0</span><br></pre></td></tr></table></figure>\n<p>或者单纯一次性的使用某个版本运行一下：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm run node --version</span><br></pre></td></tr></table></figure>\n<p>以及别忘了 <code>which</code> 命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">nvm <span class=\"built_in\">which</span> 12.22</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://cdn.cbd.int/cworld-blog@latest/nodejs/Pasted_image_20230130001335.png\" alt=\"Alt text\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"移除-nvm\">移除 nvm<a title=\"#移除-nvm\" href=\"#移除-nvm\"></a></h3>\n<p>nvm 固然好用，但接下来讲的另外一个工具也许能让你怦然心动，恰巧是 nvm 的优秀替代品。如果你需要换到接下来的工具或者其他工具，也可尝试移除 nvm。</p>\n<p>首先移除整个库（也就是之前提到的 <code>.nvm</code>）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">rm</span> -rf <span class=\"string\">&quot;<span class=\"variable\">$NVM_DIR</span>&quot;</span></span><br></pre></td></tr></table></figure>\n<p>然后前往你的配置文件（也就是之前提到的如 <code>.zshrc</code> 文件），移除对应的环境变量声明文本（大概长下边这样）：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">export</span> NVM_DIR=<span class=\"string\">&quot;<span class=\"variable\">$HOME</span>/.nvm&quot;</span></span><br><span class=\"line\">[ -s <span class=\"string\">&quot;<span class=\"variable\">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; \\. <span class=\"string\">&quot;<span class=\"variable\">$NVM_DIR</span>/nvm.sh&quot;</span> <span class=\"comment\"># This loads nvm</span></span><br><span class=\"line\">[[ -r <span class=\"variable\">$NVM_DIR</span>/bash_completion ]] &amp;&amp; \\. <span class=\"variable\">$NVM_DIR</span>/bash_completion</span><br></pre></td></tr></table></figure>\n<h2 id=\"fnm\">fnm<a title=\"#fnm\" href=\"#fnm\"></a></h2>\n<p><a href=\"https://github.com/Schniz/fnm\" target=\"_blank\">fnm</a>（Fast Node Manager）基于 Rust 开发，是不是还没用就感觉到它的快了，哈哈~<br>\n同时，它是跨平台的，支持 macOS、Linux、Windows。</p>\n<h3 id=\"安装\">安装<a title=\"#安装\" href=\"#安装\"></a></h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -fsSL https://fnm.vercel.app/install | bash</span><br></pre></td></tr></table></figure>\n<p>如果你像笔者这样报错的话，可能是缺失了 <code>unzip</code>，直接安装一下即可：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install unzip</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://cdn.cbd.int/cworld-blog@latest/nodejs/Pasted_image_20230130003738.png\" alt=\"Alt text\" loading=\"lazy\" class=\"φbp\"></p>\n<h3 id=\"验证-fnm\">验证 fnm<a title=\"#验证-fnm\" href=\"#验证-fnm\"></a></h3>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">command</span> -v fnm</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 或者使用这一句</span></span><br><span class=\"line\">fnm --version</span><br></pre></td></tr></table></figure>\n<h3 id=\"fnm-用法\">fnm 用法<a title=\"#fnm-用法\" href=\"#fnm-用法\"></a></h3>\n<p>Quick start：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 1. 安装最新的 LTS 版本</span></span><br><span class=\"line\">fnm install --lts</span><br><span class=\"line\"><span class=\"comment\"># Installing Node v18.13.0 (arm64)</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 2. 设置为全局默认版本</span></span><br><span class=\"line\">fnm default 18</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 3. 尽情使用吧～</span></span><br><span class=\"line\">node -v</span><br></pre></td></tr></table></figure>\n<p><img src=\"https://cdn.cbd.int/cworld-blog@latest/nodejs/Pasted_image_20230130004314.png\" alt=\"Alt text\" loading=\"lazy\" class=\"φbp\"></p>\n<p>一些常用指令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 安装其他版本</span></span><br><span class=\"line\">$ fnm install 16</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 在当前 Shell 使用指定版本</span></span><br><span class=\"line\">$ fnm use 16</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看本地已安装的版本</span></span><br><span class=\"line\">$ fnm <span class=\"built_in\">ls</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 查看官方已发布的所有版本</span></span><br><span class=\"line\">$ fnm ls-remote | grep v16</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 速度慢的时候，可以切换到国内源</span></span><br><span class=\"line\">$ fnm install 16 --node-dist-mirror=https://npmmirror.com/mirrors/node</span><br></pre></td></tr></table></figure>\n","prev":{"title":"Vim 的一些快捷键","link":"post/vim-key"},"next":{"title":"ChatGPT 深度使用与日用方案","link":"post/chatgpt"},"plink":"https://blog.cworld.top/post/nodejs/","toc":[{"id":"nvm","title":"nvm","index":"1","children":[{"id":"安装-nvm","title":"安装 nvm","index":"1.1"},{"id":"验证-nvm","title":"验证 nvm","index":"1.2"},{"id":"nvm-用法","title":"nvm 用法","index":"1.3"},{"id":"移除-nvm","title":"移除 nvm","index":"1.4"}]},{"id":"fnm","title":"fnm","index":"2","children":[{"id":"安装","title":"安装","index":"2.1"},{"id":"验证-fnm","title":"验证 fnm","index":"2.2"},{"id":"fnm-用法","title":"fnm 用法","index":"2.3"}]}],"reward":true,"copyright":{"updated":"2023年12月15日","author":"CWorld","link":"<a href=\"https://blog.cworld.top/post/nodejs/\" title=\"NodeJS 的一些相关技术\">https://blog.cworld.top/post/nodejs/</a>","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\"https://creativecommons.org/licenses/by-nc-sa/4.0/\" rel=\"external nofollow noopener\" target=\"_blank\">CC BY-NC-ND 4.0</a>)"},"reading_time":"1143 字约 8 分钟"}